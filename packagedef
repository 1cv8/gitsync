
#Использовать logos
#Использовать fs
Перем Лог;

Процедура ПередСборкой(Знач РабочийКаталог) Экспорт

	ФС.ОбеспечитьПустойКаталог(ОбъединитьПути(РабочийКаталог, "embedded_plugins"));

	КомандаOpm = Новый Команда;
	КомандаOpm.УстановитьКоманду("opm");
	КомандаOpm.ДобавитьПараметр("run get-plugins");	

	КодВозврата = КомандаOpm.Исполнить();

	Если КодВозврата <> 0  Тогда
		ВызватьИсключение КомандаOpm.ПолучитьВывод();
	КонецЕсли;

	Лог.Информация("Настройка локальных библиотек");

КонецПроцедуры

Лог = Логирование.ПолучитьЛог(ПараметрыСистемыOpm.ИмяЛогаСистемы());

Описание.Имя("gitsync")
		.Версия("3.0.0-beta1")
		.ВерсияСреды("1.0.20")
		.ЗависитОт("logos", "1.1.1")
		.ЗависитОт("tempfiles", "0.2.2")
		.ЗависитОт("v8runner", "1.1.3")
		.ЗависитОт("gitrunner", "1.5.1")
		.ЗависитОт("strings", "0.4.1")
		.ЗависитОт("1commands", "1.3.4")
		.ЗависитОт("json", "1.0.1")
		.ЗависитОт("fs", "0.4.1")
		.ЗависитОт("delegate", "0.2.0")
		.ЗависитОт("v8storage", "0.6.5")
		.ЗависитОт("reflector", "0.4.0")
		.ЗависитОт("opm", "0.14.0")
		.ЗависитОт("cli", "0.9.8")
		.ВключитьФайл("src")
		.ВключитьФайл("docs")
		.ВключитьФайл("embedded_plugins")
		.ВключитьФайл("readme.md")
		.ОпределяетКласс("МенеджерСинхронизации", "src/core/Классы/МенеджерСинхронизации.os")
		.ОпределяетКласс("УправлениеПлагинами", "src/core/Классы/УправлениеПлагинами.os")
		.ИсполняемыйФайл("src/cmd/gitsync.os");
